// ============================================================================
// AUTO-GENERATED FILE - DO NOT MODIFY MANUALLY
// Generated by: scripts/generate_spec_tests.py
// Regenerate with: python3 scripts/generate_spec_tests.py
// ============================================================================

///|
/// MPython spec-driven tests generated from CPython evaluation

fn assert_run(result : Result[RunResult, RuntimeError], expected : String) -> Unit raise {
  let json = @json.parse(expected) catch { _ => fail("invalid json") }
  match json {
    Array(items) => {
      if items.length() < 2 {
        fail("invalid expectation")
      }
      let tag = items[0]
      match tag {
        String(tag) =>
          if tag == "ok" {
            if items.length() != 4 {
              fail("invalid expectation")
            }
            let payload = items[1]
            let stdout = items[2]
            let stderr = items[3]
            match result {
              Ok(run) => {
                @json.inspect(run.value, content=payload)
                match stdout {
                  String(text) => inspect(run.stdout, content=text)
                  _ => fail("invalid expectation")
                }
                match stderr {
                  String(text) => inspect(run.stderr, content=text)
                  _ => fail("invalid expectation")
                }
              }
              Err(err) => fail(format_runtime_error(err))
            }
          } else if tag == "err" {
            if items.length() != 2 {
              fail("invalid expectation")
            }
            let payload = items[1]
            match result {
              Ok(_) => fail("expected error")
              Err(err) =>
                match payload {
                  String(message) =>
                    inspect(format_runtime_error(err), content=message)
                  _ => fail("invalid error payload")
                }
            }
          } else {
            fail("invalid expectation")
          }
        _ => fail("invalid expectation")
      }
    }
    _ => fail("invalid expectation")
  }
}

///|
test "generated/expr/0001" {
  let source =
    #|3.14
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 3.14], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0002" {
  let source =
    #|1/2
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 0.5], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0003" {
  let source =
    #|~False
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"-1\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0004" {
  let source =
    #|~True
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"-2\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0005" {
  let source =
    #|1+1
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"2\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0006" {
  let source =
    #|a
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'a' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0007" {
  let source =
    #|b
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'b' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0008" {
  let source =
    #|c
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'c' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0009" {
  let source =
    #|"책"
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Str\", \"책\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0010" {
  let source =
    #|globals()['A_GLOBAL_VALUE']
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'globals' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0011" {
  let source =
    #|dir()
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'dir' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0012" {
  let source =
    #|globals()
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'globals' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0013" {
  let source =
    #|locals()
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'locals' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0014" {
  let source =
    #|superglobal
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'superglobal' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0015" {
  let source =
    #|None
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0016" {
  let source =
    #|42
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"42\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0017" {
  let source =
    #|x is x
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'x' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0018" {
  let source =
    #|x in x
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'x' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0019" {
  let source =
    #|0xff
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"255\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0020" {
  let source =
    #|0777.
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 777.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0021" {
  let source =
    #|0777.0
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 777.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0022" {
  let source =
    #|000000000000000000000000000000000000000000000000000777e0
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 777.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0023" {
  let source =
    #|0777e1
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 7770.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0024" {
  let source =
    #|0e0
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 0.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0025" {
  let source =
    #|0000e-012
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 0.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0026" {
  let source =
    #|09.5
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 9.5], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0027" {
  let source =
    #|0777j
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"ValueError: unsupported value\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0028" {
  let source =
    #|000
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"0\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0029" {
  let source =
    #|00j
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"ValueError: unsupported value\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0030" {
  let source =
    #|00.0
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 0.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0031" {
  let source =
    #|0e3
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 0.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0032" {
  let source =
    #|090000000000000.
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 90000000000000.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0033" {
  let source =
    #|090000000000000.0000000000000000000000
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 90000000000000.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0034" {
  let source =
    #|090000000000000e0
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 90000000000000.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0035" {
  let source =
    #|090000000000000e-0
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 90000000000000.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0036" {
  let source =
    #|090000000000000j
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"ValueError: unsupported value\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0037" {
  let source =
    #|000000000000008.
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 8.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0038" {
  let source =
    #|000000000000009.
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Float\", 9.0], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0039" {
  let source =
    #|0b101010
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"42\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0040" {
  let source =
    #|-0b000000000010
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"-2\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0041" {
  let source =
    #|0o777
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"511\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/expr/0042" {
  let source =
    #|-0o0000010
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", [\"Int\", \"-8\"], \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0001" {
  let source =
    #|foo(1 + 1)
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'foo' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0002" {
  let source =
    #|print(1)
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"1\\n\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0003" {
  let source =
    #|print("책")
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"책\\n\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0004" {
  let source =
    #|z = 1
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0005" {
  let source =
    #|z = 1+1
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0006" {
  let source =
    #|print('Hello World!')
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"Hello World!\\n\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0007" {
  let source =
    #|x=1
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0008" {
  let source =
    #|globalname
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'globalname' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0009" {
  let source =
    #|superglobal
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'superglobal' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0010" {
  let source =
    #|a
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'a' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0011" {
  let source =
    #|attr = 1
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0012" {
  let source =
    #|res = "str_value"
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0013" {
  let source =
    #|res = ("str_value",)
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0014" {
  let source =
    #|res = "str\0value!"
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0015" {
  let source =
    #|a = 1
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0016" {
  let source =
    #|hi
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'hi' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0017" {
  let source =
    #|
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"ok\", \"None\", \"\", \"\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0018" {
  let source =
    #|z = a
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'a' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0019" {
  let source =
    #|z = dir()
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'dir' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0020" {
  let source =
    #|z = globals()
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'globals' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0021" {
  let source =
    #|z = locals()
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'locals' is not defined\"]"
  assert_run(result, expected)
}

///|
test "generated/program/0022" {
  let source =
    #|z = b
  let result = Interpreter::new().exec_source(source)
  let expected = "[\"err\", \"NameError: name 'b' is not defined\"]"
  assert_run(result, expected)
}

